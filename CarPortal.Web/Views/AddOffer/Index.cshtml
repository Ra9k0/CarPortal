@using CarPortal.Services.Interfaces
@using Microsoft.AspNetCore.Mvc.TagHelpers
@{
	ViewData["Title"] = "Add Offer Page";
}
@model CarPortal.Web.ViewModels.AddOffer.ModelViewModel

<form>
	<div class="form-row">
		<div class="form-group col-md-4">
			<label for="Categories">Category</label>
			<select asp-for="CategoryId" id="categoryId" asp-items="@ViewBag.Categories" class="form-control">
			</select>
		</div>
		<div class="form-group col-md-4">
			<label for="Makes">Makes</label>
			<select asp-for="Id" id="makeId" class="form-control">
			</select>
		</div>
		<div class="form-group col-md-4">
			<label for="Model">Model</label>
			<select id="Model" class="form-control">
				<option>Choose...</option>
			</select>
		</div>
		<div class="form-group col-md-6">
			<label for="inputPassword4">Password</label>
			<input type="password" class="form-control" id="inputPassword4" placeholder="Password">
		</div>
	</div>
	<div class="form-group">
		<label for="inputAddress">Address</label>
		<input type="text" class="form-control" id="inputAddress" placeholder="1234 Main St">
	</div>
	<div class="form-group">
		<label for="inputAddress2">Address 2</label>
		<input type="text" class="form-control" id="inputAddress2" placeholder="Apartment, studio, or floor">
	</div>
	<div class="form-row">
		<div class="form-group col-md-6">
			<label for="inputCity">City</label>
			<input type="text" class="form-control" id="inputCity">
		</div>
		<div class="form-group col-md-2">
			<label for="inputZip">Zip</label>
			<input type="text" class="form-control" id="inputZip">
		</div>
	</div>
	<div class="form-group">
		<div class="form-check">
			<input class="form-check-input" type="checkbox" id="gridCheck">
			<label class="form-check-label" for="gridCheck">
				Check me out
			</label>
		</div>
	</div>
	<button type="submit" class="btn btn-primary">Sign in</button>
</form>

@section Scripts{
	<script>
	$(document).ready(function(){
		getMakeByCategoryId();
	})
	$('#categoryId').change(function(){
		getMakeByCategoryId();
	});
		var getMakeByCategoryId = function(){
			$.ajax({
				url: '@Url.Action("GetMakes", "AddOffer")',
				type: 'GET',
				data:{
					categoryId : $('#categoryId').val(),
				},
				success: function(data){
					$('#productId').find('option').remove()
					$(data).each(
						function(index,item){
							$('#makeId').append('<option value="'+item.id+'">'+item.name+'</option>')
						}
					);
				}
			})
		}
	</script>
}
